{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\n\r\nconst gallery = document.querySelector('.gallery');\r\nconst lightbox = new SimpleLightbox('.gallery a', {});\r\n\r\nfunction scrollBy() {\r\n  const itemHeight = gallery.firstElementChild.getBoundingClientRect().height;\r\n  window.scrollBy({top: 2 * itemHeight, behavior: 'smooth'});\r\n}\r\n\r\nexport function clearGallery() {\r\n  gallery.innerHTML = '';\r\n}\r\n\r\nexport function renderGallery(images, enableScrolling = false) {\r\n  const markup = images\r\n    .map(image =>\r\n        `<li class=\"gallery-item\">\r\n      <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\r\n        <img\r\n          class=\"gallery-image\"\r\n          src=\"${image.previewURL}\"\r\n        />\r\n      </a>\r\n      <div class=\"description\">\r\n        <div class=\"field\">\r\n          <span class=\"label\">Likes</span>\r\n          <span class=\"value\">${image.likes}</span>\r\n        </div>\r\n        <div  class=\"field\">\r\n          <span class=\"label\">Views</span>\r\n          <span class=\"value\">${image.views}</span>\r\n        </div>\r\n        <div  class=\"field\">\r\n          <span class=\"label\">Comments</span>\r\n          <span class=\"value\">${image.comments}</span>\r\n        </div>\r\n        <div  class=\"field\">\r\n          <span class=\"label\">Downloads</span>\r\n          <span class=\"value\">${image.downloads}</span>\r\n        </div>\r\n      </div>\r\n    </li>`\r\n    )\r\n    .join('');\r\n  gallery.insertAdjacentHTML('beforeend', markup);\r\n  console.log('gallery = ' + gallery.childElementCount)\r\n  lightbox.refresh();\r\n  if (enableScrolling)\r\n  {\r\n    scrollBy();\r\n  }\r\n}","import axios from 'axios';\n\nexport async function searchImages(searchTerm, imagesPerPage, pageNumber) {\n  const searchParams = new URLSearchParams({\n    key: '42800487-0338ab50e10ef15f71fc3313e',\n    q: `${searchTerm.trim()}`,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: imagesPerPage,\n    page: pageNumber,\n  });\n  console.log(searchParams.toString());\n  const url = `https://pixabay.com/api/?${searchParams}`;\n  console.log(url);\n  const options = {\n    method: 'GET',\n  };\n  try {\n    const response = await axios.get(url, options)\n    return {images: response.data.hits, totalImages: response.data.totalHits};\n  }\n  catch (e) {\n    console.log('error = ' + e);\n  }\n}","import { clearGallery, renderGallery } from './js/render-functions.js';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\nimport { searchImages } from './js/pixabay-api.js';\r\n\r\nconst form = document.querySelector('.form');\r\nconst loader = document.querySelector(`.loader`);\r\nconst loadMoreButton = document.querySelector('#load-more');\r\nconst loadMoreMessage = document.querySelector('#load-more-end-message');\r\nlet searchTerm;\r\nconst imagesPerPage = 15;\r\nlet totalPages;\r\nlet currentPage = 1;\r\n\r\nfunction showLoadMore() {\r\n  loadMoreButton.classList.remove('hidden');\r\n}\r\n\r\nfunction hideLoadMore() {\r\n  loadMoreButton.classList.add('hidden');\r\n}\r\n\r\nfunction showLoading() {\r\n  loader.classList.remove('hidden');\r\n}\r\n\r\nfunction hideLoading() {\r\n  loader.classList.add('hidden');\r\n}\r\n\r\nasync function loadImages(searchQuery, enableScrolling = false) {\r\n  if (!searchQuery) {\r\n    console.error('Search query is empty')\r\n  }\r\n  showLoading();\r\n  const { images, totalImages } = await searchImages(searchQuery.trim(), imagesPerPage, currentPage);\r\n  totalPages = Math.ceil(totalImages / imagesPerPage);\r\n  hideLoading();\r\n  if (images.length === 0) {\r\n    iziToast.error({\r\n      message: 'Sorry, there are no images matching your searchImages query. Please try again!',\r\n    });\r\n    return;\r\n  }\r\n  ++currentPage;\r\n  renderGallery(images, enableScrolling);\r\n  showLoadMore();\r\n\r\n  if (currentPage > totalPages) {\r\n    hideLoading();\r\n    hideLoadMore();\r\n    iziToast.info({\r\n      position: 'topRight',\r\n      message: `We're sorry, but you've reached the end of search results.`,\r\n    });\r\n  }\r\n}\r\n\r\nfunction handleSubmitSearch(event) {\r\n  event.preventDefault();\r\n  const newTerm = form.elements.searchBar.value;\r\n  if (!newTerm) {\r\n    alert`Please enter something to search for!`;\r\n    return;\r\n  }\r\n  currentPage = 1;\r\n  hideLoadMore();\r\n  clearGallery();\r\n  searchTerm = newTerm;\r\n  loadImages(searchTerm);\r\n}\r\n\r\nfunction handleLoadMore(event) {\r\n  loadImages(searchTerm, true);\r\n}\r\n\r\nform.addEventListener('submit', handleSubmitSearch);\r\nloadMoreButton.addEventListener('click', handleLoadMore);\r\n"],"names":["gallery","lightbox","SimpleLightbox","scrollBy","itemHeight","clearGallery","renderGallery","images","enableScrolling","markup","image","searchImages","searchTerm","imagesPerPage","pageNumber","searchParams","url","options","response","axios","e","form","loader","loadMoreButton","totalPages","currentPage","showLoadMore","hideLoadMore","showLoading","hideLoading","loadImages","searchQuery","totalImages","iziToast","handleSubmitSearch","event","newTerm","handleLoadMore"],"mappings":"owBAGA,MAAMA,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAW,IAAIC,EAAe,aAAc,CAAE,CAAA,EAEpD,SAASC,GAAW,CAClB,MAAMC,EAAaJ,EAAQ,kBAAkB,sBAAqB,EAAG,OACrE,OAAO,SAAS,CAAC,IAAK,EAAII,EAAY,SAAU,QAAQ,CAAC,CAC3D,CAEO,SAASC,GAAe,CAC7BL,EAAQ,UAAY,EACtB,CAEO,SAASM,EAAcC,EAAQC,EAAkB,GAAO,CAC7D,MAAMC,EAASF,EACZ,IAAIG,GACD;AAAA,sCAC8BA,EAAM,aAAa;AAAA;AAAA;AAAA,iBAGxCA,EAAM,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAMDA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,gCAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,gCAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,gCAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,UAI1C,EACA,KAAK,EAAE,EACVV,EAAQ,mBAAmB,YAAaS,CAAM,EAC9C,QAAQ,IAAI,aAAeT,EAAQ,iBAAiB,EACpDC,EAAS,QAAO,EACZO,GAEFL,GAEJ,CCnDO,eAAeQ,EAAaC,EAAYC,EAAeC,EAAY,CACxE,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAG,GAAGH,EAAW,KAAM,CAAA,GACvB,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAUC,EACV,KAAMC,CACV,CAAG,EACD,QAAQ,IAAIC,EAAa,SAAU,CAAA,EACnC,MAAMC,EAAM,4BAA4BD,CAAY,GACpD,QAAQ,IAAIC,CAAG,EACf,MAAMC,EAAU,CACd,OAAQ,KACZ,EACE,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAIH,EAAKC,CAAO,EAC7C,MAAO,CAAC,OAAQC,EAAS,KAAK,KAAM,YAAaA,EAAS,KAAK,SAAS,CACzE,OACME,EAAG,CACR,QAAQ,IAAI,WAAaA,CAAC,CAC3B,CACH,CCpBA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,YAAY,EAClC,SAAS,cAAc,wBAAwB,EACvE,IAAIX,EACJ,MAAMC,EAAgB,GACtB,IAAIW,EACAC,EAAc,EAElB,SAASC,GAAe,CACtBH,EAAe,UAAU,OAAO,QAAQ,CAC1C,CAEA,SAASI,GAAe,CACtBJ,EAAe,UAAU,IAAI,QAAQ,CACvC,CAEA,SAASK,GAAc,CACrBN,EAAO,UAAU,OAAO,QAAQ,CAClC,CAEA,SAASO,GAAc,CACrBP,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAEA,eAAeQ,EAAWC,EAAavB,EAAkB,GAAO,CACzDuB,GACH,QAAQ,MAAM,uBAAuB,EAEvCH,IACA,KAAM,CAAE,OAAArB,EAAQ,YAAAyB,CAAW,EAAK,MAAMrB,EAAaoB,EAAY,KAAM,EAAElB,EAAeY,CAAW,EAGjG,GAFAD,EAAa,KAAK,KAAKQ,EAAcnB,CAAa,EAClDgB,IACItB,EAAO,SAAW,EAAG,CACvB0B,EAAS,MAAM,CACb,QAAS,gFACf,CAAK,EACD,MACD,CACD,EAAER,EACFnB,EAAcC,EAAQC,CAAe,EACrCkB,IAEID,EAAcD,IAChBK,IACAF,IACAM,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,4DACf,CAAK,EAEL,CAEA,SAASC,EAAmBC,EAAO,CACjCA,EAAM,eAAc,EACpB,MAAMC,EAAUf,EAAK,SAAS,UAAU,MACxC,GAAI,CAACe,EAAS,CACZ,6CACA,MACD,CACDX,EAAc,EACdE,IACAtB,IACAO,EAAawB,EACbN,EAAWlB,CAAU,CACvB,CAEA,SAASyB,EAAeF,EAAO,CAC7BL,EAAWlB,EAAY,EAAI,CAC7B,CAEAS,EAAK,iBAAiB,SAAUa,CAAkB,EAClDX,EAAe,iBAAiB,QAASc,CAAc"}